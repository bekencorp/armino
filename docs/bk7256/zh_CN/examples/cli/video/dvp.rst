DVP Cli
================

:link_to_translation:`en:[English]`

1、功能概述
--------------------------
	为了便于验证video_transfer(dvp和uvc)的相关功能，为此设计了一系列的CLI CMD。所有的DVP CLI命令以 ``dvp`` 开头，后面接具体命令和参数。如果命令执行成功，则返回 ``CMDRSP:OK``。如果命令执行失败，则返回 ``CMDRSP:ERROR``。
	当前命令是否生效是由宏 ``CLI_CFG_DVP``，位置：``components\bk_cli\cli_config.h``。


2、代码路径
--------------------------
	路径: ``\components\demo\media\video\capture\capture.c``

3、cli命令简介
--------------------------
支持的命令如下:
	2.dvp init
	 - 功能说明
		初始化当前dvp/uvc摄像头，并进行硬件压缩编码
	 - 命令格式
		dvp init param1 param2 param3

		+-----------+------------------------------------------------------------------------+
		|param1     | camera type, reference ``media_camera_type_t``                         |
		+-----------+------------------------------------------------------------------------+
		|param2     | camera ppi, reference ``media_ppi_t``                                  |
		+-----------+------------------------------------------------------------------------+
		|param3     | camera fps, reference ``sensor_fps_t``                                 |
		+-----------+------------------------------------------------------------------------+

	 - 测试用例
		| 初始化dvp/jpeg摄像头：``dvp init``
		| 初始化dvp/jpeg摄像头：``dvp init 0 640X480 20``
		| 初始化uvc/jpeg摄像头：``dvp init 4 640X480 20``
		| 初始化uvc/h264摄像头：``dvp init 5 640X480 20``

	3.dvp deinit
	 - 功能说明
		关闭当前使用的摄像头，在初始化dvp/uvc成功之后调用。
	 - 命令格式
		dvp deinit

		此命令没有参数。
	 - 测试用例
		``dvp deinit``

	4.dvp read
	 - 功能说明
		读取压缩的数据到sram中，在初始化dvp成功之后调用。
	 - 命令格式
		dvp read param1

		+-----------+------------------------------------------------------------------------+
		|param1     | buffer length, unit byte                                               |
		+-----------+------------------------------------------------------------------------+

	 - 测试用例
		``dvp read 40960``

	5.dvp capture
	 - 功能说明
		拍照功能，保存一张图像
	 - 命令格式
		dvp capture param1

		+-----------+------------------------------------------------------------------------+
		|param1     | capture name id                                                        |
		|           |  Range: 0-255                                                          |
		+-----------+------------------------------------------------------------------------+

	 - 测试用例
		``dvp capture 1``

	6.dvp capture
	 - 功能说明
		拍照功能，保存一张图像
	 - 命令格式
		dvp capture param1

		+-----------+------------------------------------------------------------------------+
		|param1     | capture name id                                                        |
		|           |  Range: 0-255                                                          |
		+-----------+------------------------------------------------------------------------+

	 - 测试用例
		``dvp capture 1``

	7.dvp auto_encode
	 - 功能说明
		设置jpeg自动压缩使能和压缩大小，在初始化dvp(uvc不支持)成功之后调用。
	 - 命令格式
		dvp auto_encode param1 param2 param3

		+-----------+------------------------------------------------------------------------+
		|param1     | Enable/diisable jpeg auto_encode                                       |
		|           |  Range: 1/0                                                            |
		+-----------+------------------------------------------------------------------------+
		|param2     | Set jpeg auto_encode output size upper limit                           |
		|           |  Range: 0-200, unit kbyte                                              |
		+-----------+------------------------------------------------------------------------+
		|param3     | Set jpeg auto_encode output size lower limit                           |
		|           |  Range: 0-200, unit kbyte                                              |
		+-----------+------------------------------------------------------------------------+

	 - 测试用例
		``dvp auto_encode 1 10 40``

	8.dvp dump
	 - 功能说明
		通过I2C读取dvp sensor内部寄存器的值，uvc不支持
	 - 命令格式
		dvp dump

		此命令没有参数，在初始化dvp成功之后调用。
	 - 测试用例
		``dvp dump``